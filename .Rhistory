ifelse(datamerged_FIXED$morethan3.forest.changes == "yes", 'multiple events noise',
ifelse(datamerged_FIXED$ChangeType.2 %in% c("Degradation","Deforestation","Regeneration") & datamerged_FIXED$third.forest.change.event == "no", 'multiple events ecologically possible',
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time", "stable non forest",
ifelse(datamerged_FIXED$forest.change.event == "no", "stable forest", 'NotReviewed'))))))))
table(datamerged_FIXED$CEOreadable_v2)
write.csv(datamerged_FIXED, file = 'Results\\Philippines_Test2.csv', row.names = F)
############Set up clean CEO labels - Version 3
#In version 3: Pixels with multiple events are combined
datamerged_FIXED$CEOreadable_v3 <- ifelse(datamerged_FIXED$ChangeType.1 == "Degradation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(datamerged_FIXED$ChangeType.1 == "Deforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Deforestation',
ifelse(datamerged_FIXED$ChangeType.1 == "Reforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Reforestation',
ifelse(datamerged_FIXED$morethan3.forest.changes == "no", 'multiple events',
ifelse(datamerged_FIXED$morethan3.forest.changes == "yes", 'multiple events',
ifelse(datamerged_FIXED$ChangeType.2 %in% c("Degradation","Deforestation","Regeneration") & datamerged_FIXED$third.forest.change.event == "no", 'multiple events',
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time", "stable non forest",
ifelse(datamerged_FIXED$forest.change.event == "no", "stable forest", 'NotReviewed'))))))))
table(datamerged_FIXED$CEOreadable_v3)
write.csv(datamerged_FIXED, file = 'Results\\Philippines_Test3.csv', row.names = F)
############Set up clean CEO labels - Version 4
#In version 3: Pixels with multiple events are combined, agroforestry pulled out
datamerged_FIXED$CEOreadable_v4 <- ifelse(datamerged_FIXED$ChangeType.1 == "Degradation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(datamerged_FIXED$ChangeType.1 == "Deforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Deforestation',
ifelse(datamerged_FIXED$ChangeType.1 == "Reforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Reforestation',
ifelse(datamerged_FIXED$morethan3.forest.changes == "no", 'multiple events',
ifelse(datamerged_FIXED$morethan3.forest.changes == "yes", 'multiple events',
ifelse(datamerged_FIXED$ChangeType.2 %in% c("Degradation","Deforestation","Regeneration") & datamerged_FIXED$third.forest.change.event == "no", 'multiple events',
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time" & datamerged_FIXED$Crop.Type.2000 %in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest- Agroforestry",
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time" & datamerged_FIXED$Crop.Type.2000 %!in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest",
ifelse(datamerged_FIXED$forest.change.event == "no", "stable forest", 'NotReviewed')))))))))
table(datamerged_FIXED$CEOreadable_v4)
############Set up clean CEO labels - Version 4
#In version 3: Pixels with multiple events are combined, agroforestry pulled out
datamerged_FIXED$CEOreadable_v4 <- ifelse(datamerged_FIXED$ChangeType.1 == "Degradation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(datamerged_FIXED$ChangeType.1 == "Deforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Deforestation',
ifelse(datamerged_FIXED$ChangeType.1 == "Reforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Reforestation',
ifelse(datamerged_FIXED$morethan3.forest.changes == "no", 'multiple events',
ifelse(datamerged_FIXED$morethan3.forest.changes == "yes", 'multiple events',
ifelse(datamerged_FIXED$ChangeType.2 %in% c("Degradation","Deforestation","Regeneration") & datamerged_FIXED$third.forest.change.event == "no", 'multiple events',
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time" & datamerged_FIXED$Crop.Type.2000 %in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest Agroforestry",
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time" & datamerged_FIXED$Crop.Type.2000 %!in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest",
ifelse(datamerged_FIXED$forest.change.event == "no", "stable forest", 'NotReviewed')))))))))
table(datamerged_FIXED$CEOreadable_v4)
write.csv(datamerged_FIXED, file = 'Results\\Philippines_Test4.csv', row.names = F)
#cross tab of strata v2
table(datamerged_FIXED$ReadableChangeStrata_Map_v2, datamerged_FIXED$CEOreadable_v2)
table_mapv1_CEOv2 <- table(datamerged_FIXED$ReadableChangeStrata_Map_v2, datamerged_FIXED$CEOreadable_v2)
write.csv(table_mapv1_CEOv2, file = 'Results\\CrossTable_mapv2_ceov2.csv', row.names = T)
#cross tab of strata v3
table(datamerged_FIXED$ReadableChangeStrata_Map_v3, datamerged_FIXED$CEOreadable_v3)
table_mapv1_CEOv3 <- table(datamerged_FIXED$ReadableChangeStrata_Map_v3, datamerged_FIXED$CEOreadable_v3)
write.csv(table_mapv1_CEOv3, file = 'Results\\CrossTable_mapv3_ceov3.csv', row.names = T)
#########################################
## Set up sample design
#########################################
strat_design <- svydesign(id = ~1, strata = ~ReadableChangeStrata_Map_v1, fpc = pixel.count,
data = datamerged_FIXED)
#Unbiased Area Estimation of Philippines Forest Change
#Written by Karis Tenneson and Crystal Wespestad (SIG) Feb, 2022
#####################################################################
library(survey)
library(tidyverse)
library(knitr)
library(rmarkdown)
library(tidyr)
library(networkD3)
library(tidyverse)
library(dplyr)
setwd("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis")
# CEO data (Original with CEO duplicate bug)
#file replace with one with duplicates removed
dataCEO <- read.csv('C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\ceo-Philippines_Change_madeJan18_SingleInterpretation_Final_V2-sample-data-2022-03-02_no duplicates.csv')
#find the erroneously duplicated plots, which should not be duplicates. Asked which should be kept.
dataCEO$ï..plotid[duplicated(dataCEO$ï..plotid)] #found 274 282 288 288 330 393 868
dataCEO$lon[duplicated(dataCEO$lon)]
dataCEO$lon[duplicated(dataCEO$lat)]
dim(dataCEO)
table(dataCEO$Land.cover.in.2000.)
table(dataCEO$Type.of.forest.)
table(dataCEO$Type.of.non.forest.land.cover.)
#upload the additional CEO points (150)
#double interpretations with duplicates removed
dataCEO_TOADD <- read.csv("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\ceo-Philippines_Change_madeJan18_QAQC-sample-data-2022-01-28.csv")
#############Used this to find erroneous duplicates
dataCEO_TOADD$ï..plotid[duplicated(dataCEO_TOADD$ï..plotid)]
dim(dataCEO_TOADD)
colnames(dataCEO)==colnames(dataCEO_TOADD)
#make column names agree
dataCEO_TOADD$Is.this.a.mixed.land.cover.pixel. <- "Not Measured"
colnames(dataCEO)[colnames(dataCEO) == "ï..plotid"] <- "plotid"
colnames(dataCEO)==colnames(dataCEO_TOADD)
#group interpreted CEO points
dataCEO_combo<-rbind(dataCEO_TOADD, dataCEO)
nrow(dataCEO_combo)
head(dataCEO_combo)
tail(dataCEO_combo)
#Update the column names for original CEO data to shorten them
colnames(dataCEO_combo)
colnames(dataCEO_combo)[14]<-"confidence"
colnames(dataCEO_combo)[15]<-"confidence.reasoning"
colnames(dataCEO_combo)[16]<-"LC2000"
colnames(dataCEO_combo)[17]<-"Forest.Type.2000"
colnames(dataCEO_combo)[18]<-"NonForest.Type.2000"
colnames(dataCEO_combo)[19]<-"Crop.Type.2000"
colnames(dataCEO_combo)[20]<-"LC2018end"
colnames(dataCEO_combo)[21]<-"forest.change.event"
colnames(dataCEO_combo)[23]<-"ChangeType.1"
colnames(dataCEO_combo)[24]<-"Degradation.Driver.1"
colnames(dataCEO_combo)[25]<-"Loss.Driver.1"
colnames(dataCEO_combo)[26]<-"second.forest.change.event"
colnames(dataCEO_combo)[28]<-"ChangeType.2"
colnames(dataCEO_combo)[29]<-"Degradation.Driver.2"
colnames(dataCEO_combo)[30]<-"Loss.Driver.2"
colnames(dataCEO_combo)[31]<-"third.forest.change.event"
colnames(dataCEO_combo)[33]<-"ChangeType.3"
colnames(dataCEO_combo)[34]<-"Degradation.Driver.3"
colnames(dataCEO_combo)[35]<-"Loss.Driver.3"
colnames(dataCEO_combo)[36]<-"morethan3.forest.changes"
colnames(dataCEO_combo)[37]<-"describe.extra.changes"
colnames(dataCEO_combo)[38]<-"Forest.Type.2018"
colnames(dataCEO_combo)[39]<-"NonForest.Type.2018"
colnames(dataCEO_combo)[40]<-"Crop.Type.2018"
colnames(dataCEO_combo)[41]<-"mixed.lc.pixel"
colnames(dataCEO_combo)
#output the cleaned CEO data
write.csv(dataCEO_combo, file = 'Results\\Philippines_CEO_FinalPoints_SAVE.csv', row.names = F)
##########Join points with map strata values##################
# #Map strata dictionary -- projects/sig-ee/Philippines/v2/strata/gapFillStrata-2-2-0
# 31: "deforested epoch 1",
# 32: "deforested epoch 2 & 3",
# 41: "reforested epoch 1",
# 42: "reforested epoch 2 & 3",
# 50: "stable forest",
# 60: "stable non forest",
# 70: "multiple events noise",
# 80: "multiple events ecologically possible",
## file created of extracted map strata from exported dataCEO_combo
data_mapstrata <- read.csv("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\PhilippinesPointsCombo_Strata.csv")
dim(data_mapstrata)
colnames(data_mapstrata)
#####Join fire results to original CSV points based on plotid
datamerged <- merge(dataCEO_combo, data_mapstrata[c('pl_change_strata','plotid')], by.x =c('plotid'), by.y = c('plotid'), all.x=T)
head(datamerged)
dim(datamerged)
#########################################################################################
####Found a couple illogical points which were removed, and the fixed file was reimported
#############Re-import created file after illogical points fixed by Trina and Liz
datamerged_FIXED <- read.csv("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\Philippines_compiled_checked_TrinaLiz.csv")
dim(datamerged_FIXED)
colnames(datamerged_FIXED)[1]<-"ChangeStrata_Map"
datamerged_FIXED <- datamerged_FIXED[-c(43:48)]
colnames(datamerged_FIXED)
#add a human readable column for change strata
colnames(datamerged)[42]<-"ChangeStrata_Map"
datamerged_FIXED$ReadableChangeStrata_Map_v1<-"fixMe"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 31]<-"deforested epoch 1"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 32]<-"deforested epoch 2 & 3"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 41]<-"reforested epoch 1"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 42]<-"reforested epoch 2 & 3"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 50]<-"stable forest"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 60]<-"stable non forest"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 70]<-"multiple events noise"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 80]<-"multiple events ecologically possible"
unique(datamerged_FIXED$ReadableChangeStrata_Map_v1)
colnames(datamerged_FIXED)
##### Epoch 1 = 2000-2005
##### Epoch 2 = 2006-2012
##### Epoch 3 = 2013-2018
########Simplified Map data
datamerged_FIXED$ReadableChangeStrata_Map_v2<-"fixMe"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 31]<-"Deforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 32]<-"Deforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 41]<-"Reforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 42]<-"Reforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 50]<-"stable forest"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 60]<-"stable non forest"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 70]<-"multiple events noise"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 80]<-"multiple events ecologically possible"
unique(datamerged_FIXED$ReadableChangeStrata_Map_v2)
colnames(datamerged_FIXED)
########Simplified Map data
datamerged_FIXED$ReadableChangeStrata_Map_v3<-"fixMe"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 31]<-"Deforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 32]<-"Deforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 41]<-"Reforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 42]<-"Reforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 50]<-"stable forest"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 60]<-"stable non forest"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 70]<-"multiple events"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 80]<-"multiple events"
unique(datamerged_FIXED$ReadableChangeStrata_Map_v3)
colnames(datamerged_FIXED)
############## Strata pixel counts #############
strataAreas <- read.csv("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\philippines_pixelcounts.csv")
head(strataAreas)
datamerged_FIXED <- merge(datamerged_FIXED, strataAreas, by.x = 'ChangeStrata_Map', by.y = 'Map.value', all.x = F)
dim(datamerged_FIXED)
############Set up clean CEO labels - Version 1
#Right now the order in which you define these matters
#In version 1: Pixels with multiple events are not separated out
datamerged_FIXED$CEOreadable_v1 <- ifelse(datamerged_FIXED$ChangeType.1 == "Degradation" | datamerged_FIXED$ChangeType.2 == "Degradation" | datamerged_FIXED$ChangeType.3 == "Degradation" , 'Degradation',
ifelse(datamerged_FIXED$ChangeType.1 == "Deforestation"| datamerged_FIXED$ChangeType.2 == "Deforestation" | datamerged_FIXED$ChangeType.3 == "Deforestation", 'Deforestation',
ifelse(datamerged_FIXED$ChangeType.1 == "Reforestation"| datamerged_FIXED$ChangeType.2 == "Reforestation" | datamerged_FIXED$ChangeType.3 == "Reforestation", 'Reforestation',
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time", "stable non forest",
ifelse(datamerged_FIXED$forest.change.event == "no", "stable forest", 'NotReviewed')))))
table(datamerged_FIXED$CEOreadable_v1)
write.csv(datamerged_FIXED, file = 'Results\\Philippines_Test1.csv', row.names = F)
############Set up clean CEO labels - Version 2
#In version 2: Pixels with multiple events ARE separated out
'%!in%' <- Negate('%in%')
datamerged_FIXED$CEOreadable_v2 <- ifelse(datamerged_FIXED$ChangeType.1 == "Degradation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(datamerged_FIXED$ChangeType.1 == "Deforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Deforestation',
ifelse(datamerged_FIXED$ChangeType.1 == "Reforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Reforestation',
ifelse(datamerged_FIXED$morethan3.forest.changes == "no", 'multiple events ecologically possible',
ifelse(datamerged_FIXED$morethan3.forest.changes == "yes", 'multiple events noise',
ifelse(datamerged_FIXED$ChangeType.2 %in% c("Degradation","Deforestation","Regeneration") & datamerged_FIXED$third.forest.change.event == "no", 'multiple events ecologically possible',
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time", "stable non forest",
ifelse(datamerged_FIXED$forest.change.event == "no", "stable forest", 'NotReviewed'))))))))
table(datamerged_FIXED$CEOreadable_v2)
write.csv(datamerged_FIXED, file = 'Results\\Philippines_Test2.csv', row.names = F)
############Set up clean CEO labels - Version 3
#In version 3: Pixels with multiple events are combined
datamerged_FIXED$CEOreadable_v3 <- ifelse(datamerged_FIXED$ChangeType.1 == "Degradation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(datamerged_FIXED$ChangeType.1 == "Deforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Deforestation',
ifelse(datamerged_FIXED$ChangeType.1 == "Reforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Reforestation',
ifelse(datamerged_FIXED$morethan3.forest.changes == "no", 'multiple events',
ifelse(datamerged_FIXED$morethan3.forest.changes == "yes", 'multiple events',
ifelse(datamerged_FIXED$ChangeType.2 %in% c("Degradation","Deforestation","Regeneration") & datamerged_FIXED$third.forest.change.event == "no", 'multiple events',
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time", "stable non forest",
ifelse(datamerged_FIXED$forest.change.event == "no", "stable forest", 'NotReviewed'))))))))
table(datamerged_FIXED$CEOreadable_v3)
write.csv(datamerged_FIXED, file = 'Results\\Philippines_Test3.csv', row.names = F)
############Set up clean CEO labels - Version 4
#In version 3: Pixels with multiple events are combined, agroforestry pulled out
datamerged_FIXED$CEOreadable_v4 <- ifelse(datamerged_FIXED$ChangeType.1 == "Degradation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(datamerged_FIXED$ChangeType.1 == "Deforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Deforestation',
ifelse(datamerged_FIXED$ChangeType.1 == "Reforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Reforestation',
ifelse(datamerged_FIXED$morethan3.forest.changes == "no", 'multiple events',
ifelse(datamerged_FIXED$morethan3.forest.changes == "yes", 'multiple events',
ifelse(datamerged_FIXED$ChangeType.2 %in% c("Degradation","Deforestation","Regeneration") & datamerged_FIXED$third.forest.change.event == "no", 'multiple events',
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time" & datamerged_FIXED$Crop.Type.2000 %in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest Agroforestry",
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time" & datamerged_FIXED$Crop.Type.2000 %!in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest",
ifelse(datamerged_FIXED$forest.change.event == "no", "stable forest", 'NotReviewed')))))))))
table(datamerged_FIXED$CEOreadable_v4)
#cross tab of strata v2
table(datamerged_FIXED$ReadableChangeStrata_Map_v2, datamerged_FIXED$CEOreadable_v2)
table_mapv2_CEOv2 <- table(datamerged_FIXED$ReadableChangeStrata_Map_v2, datamerged_FIXED$CEOreadable_v2)
write.csv(table_mapv2_CEOv2, file = 'Results\\CrossTable_mapv2_ceov2.csv', row.names = T)
#cross tab of strata v3
table(datamerged_FIXED$ReadableChangeStrata_Map_v3, datamerged_FIXED$CEOreadable_v3)
table_mapv3_CEOv3 <- table(datamerged_FIXED$ReadableChangeStrata_Map_v3, datamerged_FIXED$CEOreadable_v3)
write.csv(table_mapv3_CEOv3, file = 'Results\\CrossTable_mapv3_ceov3.csv', row.names = T)
#cross tab of strata v4
table(datamerged_FIXED$ReadableChangeStrata_Map_v3, datamerged_FIXED$CEOreadable_v4)
table_mapv3_CEOv4 <- table(datamerged_FIXED$ReadableChangeStrata_Map_v3, datamerged_FIXED$CEOreadable_v4)
write.csv(table_mapv3_CEOv4, file = 'Results\\CrossTable_mapv3_ceov4.csv', row.names = T)
unique(datamerged_FIXED$ReadableChangeStrata_Map_v3)
datamerged_FIXED$ReadableChangeStrata_Map_v3
unique(datamerged_FIXED$CEOreadable_v4)
datamerged_FIXED$ReadableChangeStrata_Map_v3
unique(datamerged_FIXED$ReadableChangeStrata_Map_v3)
unique(datamerged_FIXED$CEOreadable_v4)
###########label the points that we want to review in CEO
datamerged_FIXED$CEOreviewQAQC <-"No"
datamerged_FIXED$CEOreviewQAQC <- ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "multiple events" & datamerged_FIXED$CEOreadable_v4 == "Deforestation", 'LabelLoss-MapMulti',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Reforestation" & datamerged_FIXED$CEOreadable_v4 == "Deforestation", 'LabelLoss-MapReforest',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "stable forest" & datamerged_FIXED$CEOreadable_v4 == "Deforestation", 'LabelLoss-MapForest',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "stable non forest" & datamerged_FIXED$CEOreadable_v4 == "Deforestation", 'LabelLoss-MapNonForest',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Reforestation" & datamerged_FIXED$CEOreadable_v4 == "Degradation", 'LabelDeg-MapReforest',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Deforestation" & datamerged_FIXED$CEOreadable_v4 == "Reforestation", 'LabelReforest-MapLoss',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Deforestation" & datamerged_FIXED$CEOreadable_v4 == "stable forest", 'LabelForest-MapLoss',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Deforestation" & datamerged_FIXED$CEOreadable_v4 == "stable non forest", 'LabelNonForest-MapLoss',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "multiple events" & datamerged_FIXED$CEOreadable_v4 == "stable non forest", 'LabelNonForest-MapMulti',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Reforestation" & datamerged_FIXED$CEOreadable_v4 == "stable non forest", 'LabelNonForest-MapReforest',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Reforestation" & datamerged_FIXED$CEOreadable_v4 == "stable forest", 'LabelForest-MapReforest',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "multiple events" & datamerged_FIXED$CEOreadable_v4 == "stable forest", 'LabelForest-MapMulti','No'))))))))))))
table(datamerged_FIXED$CEOreviewQAQC)
write.csv(datamerged_FIXED, file = 'Results\\LabeledCSV_CEOtoReview.csv', row.names = T)
#Unbiased Area Estimation of Philippines Forest Change
#Written by Karis Tenneson and Crystal Wespestad (SIG) Feb, 2022
#####################################################################
library(survey)
library(tidyverse)
library(knitr)
library(rmarkdown)
library(tidyr)
library(networkD3)
library(tidyverse)
library(dplyr)
setwd("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis")
# CEO data (Original with CEO duplicate bug)
#file replace with one with duplicates removed
dataCEO <- read.csv('C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\ceo-Philippines_Change_madeJan18_SingleInterpretation_Final_V2-sample-data-2022-03-02_no duplicates.csv')
#find the erroneously duplicated plots, which should not be duplicates. Asked which should be kept.
dataCEO$ï..plotid[duplicated(dataCEO$ï..plotid)] #found 274 282 288 288 330 393 868
dataCEO$lon[duplicated(dataCEO$lon)]
dataCEO$lon[duplicated(dataCEO$lat)]
dim(dataCEO)
table(dataCEO$Land.cover.in.2000.)
table(dataCEO$Type.of.forest.)
table(dataCEO$Type.of.non.forest.land.cover.)
#upload the additional CEO points (150)
#double interpretations with duplicates removed
dataCEO_TOADD <- read.csv("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\ceo-Philippines_Change_madeJan18_QAQC-sample-data-2022-01-28.csv")
#############Used this to find erroneous duplicates
dataCEO_TOADD$ï..plotid[duplicated(dataCEO_TOADD$ï..plotid)]
dim(dataCEO_TOADD)
colnames(dataCEO)==colnames(dataCEO_TOADD)
#make column names agree
dataCEO_TOADD$Is.this.a.mixed.land.cover.pixel. <- "Not Measured"
colnames(dataCEO)[colnames(dataCEO) == "ï..plotid"] <- "plotid"
colnames(dataCEO)==colnames(dataCEO_TOADD)
#group interpreted CEO points
dataCEO_combo<-rbind(dataCEO_TOADD, dataCEO)
nrow(dataCEO_combo)
head(dataCEO_combo)
tail(dataCEO_combo)
#Update the column names for original CEO data to shorten them
colnames(dataCEO_combo)
colnames(dataCEO_combo)[14]<-"confidence"
colnames(dataCEO_combo)[15]<-"confidence.reasoning"
colnames(dataCEO_combo)[16]<-"LC2000"
colnames(dataCEO_combo)[17]<-"Forest.Type.2000"
colnames(dataCEO_combo)[18]<-"NonForest.Type.2000"
colnames(dataCEO_combo)[19]<-"Crop.Type.2000"
colnames(dataCEO_combo)[20]<-"LC2018end"
colnames(dataCEO_combo)[21]<-"forest.change.event"
colnames(dataCEO_combo)[23]<-"ChangeType.1"
colnames(dataCEO_combo)[24]<-"Degradation.Driver.1"
colnames(dataCEO_combo)[25]<-"Loss.Driver.1"
colnames(dataCEO_combo)[26]<-"second.forest.change.event"
colnames(dataCEO_combo)[28]<-"ChangeType.2"
colnames(dataCEO_combo)[29]<-"Degradation.Driver.2"
colnames(dataCEO_combo)[30]<-"Loss.Driver.2"
colnames(dataCEO_combo)[31]<-"third.forest.change.event"
colnames(dataCEO_combo)[33]<-"ChangeType.3"
colnames(dataCEO_combo)[34]<-"Degradation.Driver.3"
colnames(dataCEO_combo)[35]<-"Loss.Driver.3"
colnames(dataCEO_combo)[36]<-"morethan3.forest.changes"
colnames(dataCEO_combo)[37]<-"describe.extra.changes"
colnames(dataCEO_combo)[38]<-"Forest.Type.2018"
colnames(dataCEO_combo)[39]<-"NonForest.Type.2018"
colnames(dataCEO_combo)[40]<-"Crop.Type.2018"
colnames(dataCEO_combo)[41]<-"mixed.lc.pixel"
colnames(dataCEO_combo)
#output the cleaned CEO data
write.csv(dataCEO_combo, file = 'Results\\Philippines_CEO_FinalPoints_SAVE.csv', row.names = F)
##########Join points with map strata values##################
# #Map strata dictionary -- projects/sig-ee/Philippines/v2/strata/gapFillStrata-2-2-0
# 31: "deforested epoch 1",
# 32: "deforested epoch 2 & 3",
# 41: "reforested epoch 1",
# 42: "reforested epoch 2 & 3",
# 50: "stable forest",
# 60: "stable non forest",
# 70: "multiple events noise",
# 80: "multiple events ecologically possible",
## file created of extracted map strata from exported dataCEO_combo
data_mapstrata <- read.csv("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\PhilippinesPointsCombo_Strata.csv")
dim(data_mapstrata)
colnames(data_mapstrata)
#####Join fire results to original CSV points based on plotid
datamerged <- merge(dataCEO_combo, data_mapstrata[c('pl_change_strata','plotid')], by.x =c('plotid'), by.y = c('plotid'), all.x=T)
head(datamerged)
dim(datamerged)
#########################################################################################
####Found a couple illogical points which were removed, and the fixed file was reimported
#############Re-import created file after illogical points fixed by Trina and Liz
datamerged_FIXED <- read.csv("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\Philippines_compiled_checked_TrinaLiz.csv")
dim(datamerged_FIXED)
colnames(datamerged_FIXED)[1]<-"ChangeStrata_Map"
datamerged_FIXED <- datamerged_FIXED[-c(43:48)]
colnames(datamerged_FIXED)
#add a human readable column for change strata
colnames(datamerged)[42]<-"ChangeStrata_Map"
datamerged_FIXED$ReadableChangeStrata_Map_v1<-"fixMe"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 31]<-"deforested epoch 1"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 32]<-"deforested epoch 2 & 3"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 41]<-"reforested epoch 1"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 42]<-"reforested epoch 2 & 3"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 50]<-"stable forest"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 60]<-"stable non forest"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 70]<-"multiple events noise"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$ChangeStrata_Map == 80]<-"multiple events ecologically possible"
unique(datamerged_FIXED$ReadableChangeStrata_Map_v1)
colnames(datamerged_FIXED)
##### Epoch 1 = 2000-2005
##### Epoch 2 = 2006-2012
##### Epoch 3 = 2013-2018
########Simplified Map data
datamerged_FIXED$ReadableChangeStrata_Map_v2<-"fixMe"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 31]<-"Deforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 32]<-"Deforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 41]<-"Reforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 42]<-"Reforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 50]<-"stable forest"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 60]<-"stable non forest"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 70]<-"multiple events noise"
datamerged_FIXED$ReadableChangeStrata_Map_v2[datamerged_FIXED$ChangeStrata_Map == 80]<-"multiple events ecologically possible"
unique(datamerged_FIXED$ReadableChangeStrata_Map_v2)
colnames(datamerged_FIXED)
########Simplified Map data
datamerged_FIXED$ReadableChangeStrata_Map_v3<-"fixMe"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 31]<-"Deforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 32]<-"Deforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 41]<-"Reforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 42]<-"Reforestation"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 50]<-"stable forest"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 60]<-"stable non forest"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 70]<-"multiple events"
datamerged_FIXED$ReadableChangeStrata_Map_v3[datamerged_FIXED$ChangeStrata_Map == 80]<-"multiple events"
unique(datamerged_FIXED$ReadableChangeStrata_Map_v3)
colnames(datamerged_FIXED)
############## Strata pixel counts #############
strataAreas <- read.csv("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\philippines_pixelcounts.csv")
head(strataAreas)
datamerged_FIXED <- merge(datamerged_FIXED, strataAreas, by.x = 'ChangeStrata_Map', by.y = 'Map.value', all.x = F)
dim(datamerged_FIXED)
############Set up clean CEO labels - Version 1
#Right now the order in which you define these matters
#In version 1: Pixels with multiple events are not separated out
datamerged_FIXED$CEOreadable_v1 <- ifelse(datamerged_FIXED$ChangeType.1 == "Degradation" | datamerged_FIXED$ChangeType.2 == "Degradation" | datamerged_FIXED$ChangeType.3 == "Degradation" , 'Degradation',
ifelse(datamerged_FIXED$ChangeType.1 == "Deforestation"| datamerged_FIXED$ChangeType.2 == "Deforestation" | datamerged_FIXED$ChangeType.3 == "Deforestation", 'Deforestation',
ifelse(datamerged_FIXED$ChangeType.1 == "Reforestation"| datamerged_FIXED$ChangeType.2 == "Reforestation" | datamerged_FIXED$ChangeType.3 == "Reforestation", 'Reforestation',
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time", "stable non forest",
ifelse(datamerged_FIXED$forest.change.event == "no", "stable forest", 'NotReviewed')))))
table(datamerged_FIXED$CEOreadable_v1)
write.csv(datamerged_FIXED, file = 'Results\\Philippines_Test1.csv', row.names = F)
############Set up clean CEO labels - Version 2
#In version 2: Pixels with multiple events ARE separated out
'%!in%' <- Negate('%in%')
datamerged_FIXED$CEOreadable_v2 <- ifelse(datamerged_FIXED$ChangeType.1 == "Degradation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(datamerged_FIXED$ChangeType.1 == "Deforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Deforestation',
ifelse(datamerged_FIXED$ChangeType.1 == "Reforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Reforestation',
ifelse(datamerged_FIXED$morethan3.forest.changes == "no", 'multiple events ecologically possible',
ifelse(datamerged_FIXED$morethan3.forest.changes == "yes", 'multiple events noise',
ifelse(datamerged_FIXED$ChangeType.2 %in% c("Degradation","Deforestation","Regeneration") & datamerged_FIXED$third.forest.change.event == "no", 'multiple events ecologically possible',
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time", "stable non forest",
ifelse(datamerged_FIXED$forest.change.event == "no", "stable forest", 'NotReviewed'))))))))
table(datamerged_FIXED$CEOreadable_v2)
write.csv(datamerged_FIXED, file = 'Results\\Philippines_Test2.csv', row.names = F)
############Set up clean CEO labels - Version 3
#In version 3: Pixels with multiple events are combined
datamerged_FIXED$CEOreadable_v3 <- ifelse(datamerged_FIXED$ChangeType.1 == "Degradation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(datamerged_FIXED$ChangeType.1 == "Deforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Deforestation',
ifelse(datamerged_FIXED$ChangeType.1 == "Reforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Reforestation',
ifelse(datamerged_FIXED$morethan3.forest.changes == "no", 'multiple events',
ifelse(datamerged_FIXED$morethan3.forest.changes == "yes", 'multiple events',
ifelse(datamerged_FIXED$ChangeType.2 %in% c("Degradation","Deforestation","Regeneration") & datamerged_FIXED$third.forest.change.event == "no", 'multiple events',
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time", "stable non forest",
ifelse(datamerged_FIXED$forest.change.event == "no", "stable forest", 'NotReviewed'))))))))
table(datamerged_FIXED$CEOreadable_v3)
write.csv(datamerged_FIXED, file = 'Results\\Philippines_Test3.csv', row.names = F)
############Set up clean CEO labels - Version 4
#In version 3: Pixels with multiple events are combined, agroforestry pulled out
datamerged_FIXED$CEOreadable_v4 <- ifelse(datamerged_FIXED$ChangeType.1 == "Degradation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(datamerged_FIXED$ChangeType.1 == "Deforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Deforestation',
ifelse(datamerged_FIXED$ChangeType.1 == "Reforestation" & datamerged_FIXED$ChangeType.2 %!in% c("Degradation","Deforestation","Regeneration"), 'Reforestation',
ifelse(datamerged_FIXED$morethan3.forest.changes == "no", 'multiple events',
ifelse(datamerged_FIXED$morethan3.forest.changes == "yes", 'multiple events',
ifelse(datamerged_FIXED$ChangeType.2 %in% c("Degradation","Deforestation","Regeneration") & datamerged_FIXED$third.forest.change.event == "no", 'multiple events',
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time" & datamerged_FIXED$Crop.Type.2000 %in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest Agroforestry",
ifelse(datamerged_FIXED$forest.change.event == "N/A non-forest entire time" & datamerged_FIXED$Crop.Type.2000 %!in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest",
ifelse(datamerged_FIXED$forest.change.event == "no", "stable forest", 'NotReviewed')))))))))
table(datamerged_FIXED$CEOreadable_v4)
write.csv(datamerged_FIXED, file = 'Results\\Philippines_Test4.csv', row.names = F)
#############################################################
#############################################################
#   ANALYSIS
#############################################################
#############################################################
head(datamerged_FIXED)
#cross tab of original strata to agroforestry removed strata
table(datamerged_FIXED$strata.name, datamerged_FIXED$CEOreadable_v4)
table_maporig_ceov4 <- table(datamerged_FIXED$strata.name, datamerged_FIXED$CEOreadable_v4)
write.csv(table_maporig_ceov4, file = 'Results\\CrossTable_maporigstrata_ceov4.csv', row.names = T)
table(datamerged_FIXED$pixel.count,datamerged_FIXED$strata.name)
#cross tab of strata v2
table(datamerged_FIXED$ReadableChangeStrata_Map_v2, datamerged_FIXED$CEOreadable_v2)
table_mapv2_CEOv2 <- table(datamerged_FIXED$ReadableChangeStrata_Map_v2, datamerged_FIXED$CEOreadable_v2)
head(strataAreas)
#cross tab of strata v3
table(datamerged_FIXED$ReadableChangeStrata_Map_v3, datamerged_FIXED$CEOreadable_v3)
table_mapv3_CEOv3 <- table(datamerged_FIXED$ReadableChangeStrata_Map_v3, datamerged_FIXED$CEOreadable_v3)
write.csv(table_mapv3_CEOv3, file = 'Results\\CrossTable_mapv3_ceov3.csv', row.names = T)
#cross tab of strata v4
table(datamerged_FIXED$ReadableChangeStrata_Map_v3, datamerged_FIXED$CEOreadable_v4)
table_mapv3_CEOv4 <- table(datamerged_FIXED$ReadableChangeStrata_Map_v3, datamerged_FIXED$CEOreadable_v4)
write.csv(table_mapv3_CEOv4, file = 'Results\\CrossTable_mapv3_ceov4.csv', row.names = T)
###########label the points that we want to review in CEO
datamerged_FIXED$CEOreviewQAQC <-"No"
datamerged_FIXED$CEOreviewQAQC <- ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "multiple events" & datamerged_FIXED$CEOreadable_v4 == "Deforestation", 'LabelLoss-MapMulti',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Reforestation" & datamerged_FIXED$CEOreadable_v4 == "Deforestation", 'LabelLoss-MapReforest',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "stable forest" & datamerged_FIXED$CEOreadable_v4 == "Deforestation", 'LabelLoss-MapForest',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "stable non forest" & datamerged_FIXED$CEOreadable_v4 == "Deforestation", 'LabelLoss-MapNonForest',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Reforestation" & datamerged_FIXED$CEOreadable_v4 == "Degradation", 'LabelDeg-MapReforest',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Deforestation" & datamerged_FIXED$CEOreadable_v4 == "Reforestation", 'LabelReforest-MapLoss',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Deforestation" & datamerged_FIXED$CEOreadable_v4 == "stable forest", 'LabelForest-MapLoss',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Deforestation" & datamerged_FIXED$CEOreadable_v4 == "stable non forest", 'LabelNonForest-MapLoss',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "multiple events" & datamerged_FIXED$CEOreadable_v4 == "stable non forest", 'LabelNonForest-MapMulti',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Reforestation" & datamerged_FIXED$CEOreadable_v4 == "stable non forest", 'LabelNonForest-MapReforest',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "Reforestation" & datamerged_FIXED$CEOreadable_v4 == "stable forest", 'LabelForest-MapReforest',
ifelse(datamerged_FIXED$ReadableChangeStrata_Map_v3 == "multiple events" & datamerged_FIXED$CEOreadable_v4 == "stable forest", 'LabelForest-MapMulti','No'))))))))))))
table(datamerged_FIXED$CEOreviewQAQC)
write.csv(datamerged_FIXED, file = 'Results\\LabeledCSV_CEOtoReview.csv', row.names = T)
#########################################
## Set up sample design
#########################################
strat_design <- svydesign(id = ~1, strata = ~ReadableChangeStrata_Map_v1, fpc = ~pixel.count,
data = datamerged_FIXED)
unique(datamerged_FIXED$ReadableChangeStrata_Map_v1)
unique(datamerged_FIXED$pixel.count)
head(strataAreas)
