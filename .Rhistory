colnames(datamerged_FIXED_v2)[25]<-"DegradationDriver1b"
colnames(datamerged_FIXED_v2)[24]<-"LossDriver1b"
colnames(datamerged_FIXED_v2)[11]<-"SecondForestChangeEventb"
colnames(datamerged_FIXED_v2)[12]<-"ChangeType2b"
colnames(datamerged_FIXED_v2)[13]<-"DegradationDriver2b"
colnames(datamerged_FIXED_v2)[14]<-"LossDriver2b"
colnames(datamerged_FIXED_v2)[16]<-"ThirdForestChangeEventb"
colnames(datamerged_FIXED_v2)[17]<-"ChangeType3b"
colnames(datamerged_FIXED_v2)[19]<-"DegradationDriver3b"
colnames(datamerged_FIXED_v2)[18]<-"LossDriver3b"
colnames(datamerged_FIXED_v2)[20]<-"morethan3forestchangesb"
colnames(datamerged_FIXED_v2)[21]<-"DescribeExtraChangesb"
colnames(datamerged_FIXED_v2)[27]<-"ForestType2018b"
colnames(datamerged_FIXED_v2)[28]<-"NonForestType2018b"
colnames(datamerged_FIXED_v2)[29]<-"CropType2018b"
colnames(datamerged_FIXED_v2)[30]<-"mixedLCpixelb"
colnames(datamerged_FIXED_v2)
#########More points were reviewed by SMEs, 41 points
SMEreviewdData_toreplaceold <- read.csv('C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\reviewed41_bestlabel.csv')
dim(SMEreviewdData_toreplaceold)
colnames(SMEreviewdData_toreplaceold)
#write.csv(SMEreviewdData_toreplaceold, file = 'Results\\CHECK41.csv', row.names = F)
datamerged_combo12 <- merge(datamerged_FIXED, datamerged_FIXED_v2, by.x = c('lon','lat'), by.y = c('lonb','latb'), all.x = T)
#find duplicates in PLOTID: 19  71  82 266 315 372 445 652 669 718 814 863 901 903 924
sort(datamerged_combo12$PLOTIDb[duplicated(datamerged_combo12$PLOTID)])
SMEreviewdData_toreplaceold <- merge(datamerged_combo12, SMEreviewdData_toreplaceold, by.x = c('lon','lat'), by.y = c('lonc','latc'), all.x = T)
dim(SMEreviewdData_toreplaceold)
#write.csv(SMEreviewdData_toreplaceold, file = 'Results\\ARELATLONGSWRONG.csv', row.names = F)
####Fill in all the values for the rows that were not reviewed with the original answers
SMEreviewdData_toreplaceold$EMAILc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$EMAILc, SMEreviewdData_toreplaceold$emailb)
SMEreviewdData_toreplaceold$LC2000c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$LC2000c, SMEreviewdData_toreplaceold$LC2000b)
SMEreviewdData_toreplaceold$ForestType2000c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ForestType2000c, SMEreviewdData_toreplaceold$ForestType2000b)
SMEreviewdData_toreplaceold$NonForestType2000c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$NonForestType2000c, SMEreviewdData_toreplaceold$NonForestType2000b)
SMEreviewdData_toreplaceold$CropType2000c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$CropType2000c, SMEreviewdData_toreplaceold$CropType2000b)
SMEreviewdData_toreplaceold$forestChangeEventc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$forestChangeEventc, SMEreviewdData_toreplaceold$forestChangeEventb)
SMEreviewdData_toreplaceold$Change1yearc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$Change1yearc, SMEreviewdData_toreplaceold$Change1yearb)
SMEreviewdData_toreplaceold$SecondForestChangeEventc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$SecondForestChangeEventc, SMEreviewdData_toreplaceold$SecondForestChangeEventb)
SMEreviewdData_toreplaceold$ChangeType2c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ChangeType2c, SMEreviewdData_toreplaceold$ChangeType2b)
SMEreviewdData_toreplaceold$DegradationDriver2c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$DegradationDriver2c, SMEreviewdData_toreplaceold$DegradationDriver2b)
SMEreviewdData_toreplaceold$LossDriver2c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$LossDriver2c, SMEreviewdData_toreplaceold$LossDriver2b)
SMEreviewdData_toreplaceold$Change2yearc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$Change2yearc, SMEreviewdData_toreplaceold$Change2yearb)
SMEreviewdData_toreplaceold$ThirdForestChangeEventc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ThirdForestChangeEventc, SMEreviewdData_toreplaceold$ThirdForestChangeEventb)
SMEreviewdData_toreplaceold$ChangeType3c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ChangeType3c, SMEreviewdData_toreplaceold$ChangeType3b)
SMEreviewdData_toreplaceold$LossDriver3c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$LossDriver3c, SMEreviewdData_toreplaceold$LossDriver3b)
SMEreviewdData_toreplaceold$DegradationDriver3c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$DegradationDriver3c, SMEreviewdData_toreplaceold$DegradationDriver3b)
SMEreviewdData_toreplaceold$morethan3forestchangesc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$morethan3forestchangesc, SMEreviewdData_toreplaceold$morethan3forestchangesb)
SMEreviewdData_toreplaceold$DescribeExtraChangesc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$DescribeExtraChangesc, SMEreviewdData_toreplaceold$DescribeExtraChangesb)
SMEreviewdData_toreplaceold$Change3yearc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$Change3yearc, SMEreviewdData_toreplaceold$Change3yearb)
SMEreviewdData_toreplaceold$ChangeType1c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ChangeType1c, SMEreviewdData_toreplaceold$ChangeType1b)
SMEreviewdData_toreplaceold$LossDriver1c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$LossDriver1c, SMEreviewdData_toreplaceold$LossDriver1b)
SMEreviewdData_toreplaceold$DegradationDriver1c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$DegradationDriver1c, SMEreviewdData_toreplaceold$DegradationDriver1b)
SMEreviewdData_toreplaceold$LC2018endc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$LC2018endc, SMEreviewdData_toreplaceold$LC2018endb)
SMEreviewdData_toreplaceold$ForestType2018c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ForestType2018c, SMEreviewdData_toreplaceold$ForestType2018b)
SMEreviewdData_toreplaceold$NonForestType2018c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$NonForestType2018c, SMEreviewdData_toreplaceold$NonForestType2018b)
SMEreviewdData_toreplaceold$CropType2018c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$CropType2018c, SMEreviewdData_toreplaceold$CropType2018b)
SMEreviewdData_toreplaceold$mixedLCpixelc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$mixedLCpixelc, SMEreviewdData_toreplaceold$mixedLCpixelb)
SMEreviewdData_toreplaceold$Confidencec <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$Confidencec, SMEreviewdData_toreplaceold$Confidenceb)
SMEreviewdData_toreplaceold$ConfidenceReasoningc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ConfidenceReasoningc, SMEreviewdData_toreplaceold$ConfidenceReasoningb)
####Fill in all the values for the rows that were not reviewed with the original answers
SMEreviewdData_toreplaceold$EMAILd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$EMAIL, SMEreviewdData_toreplaceold$EMAILc)
SMEreviewdData_toreplaceold$LC2000d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$LC2000a, SMEreviewdData_toreplaceold$LC2000c)
SMEreviewdData_toreplaceold$ForestType2000d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ForestType2000, SMEreviewdData_toreplaceold$ForestType2000c)
SMEreviewdData_toreplaceold$NonForestType2000d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$NonForestType2000, SMEreviewdData_toreplaceold$NonForestType2000c)
SMEreviewdData_toreplaceold$CropType2000d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$CropType2000, SMEreviewdData_toreplaceold$CropType2000c)
SMEreviewdData_toreplaceold$forestChangeEventd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$forestChangeEvent, SMEreviewdData_toreplaceold$forestChangeEventc)
SMEreviewdData_toreplaceold$Change1yeard <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$Change1year, SMEreviewdData_toreplaceold$Change1yearc)
SMEreviewdData_toreplaceold$SecondForestChangeEventd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$SecondForestChangeEvent, SMEreviewdData_toreplaceold$SecondForestChangeEventc)
SMEreviewdData_toreplaceold$ChangeType2d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ChangeType2, SMEreviewdData_toreplaceold$ChangeType2c)
SMEreviewdData_toreplaceold$DegradationDriver2d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$DegradationDriver2c, SMEreviewdData_toreplaceold$DegradationDriver2c)
SMEreviewdData_toreplaceold$LossDriver2d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$LossDriver2, SMEreviewdData_toreplaceold$LossDriver2c)
SMEreviewdData_toreplaceold$Change2yeard <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$Change2year, SMEreviewdData_toreplaceold$Change2yearc)
SMEreviewdData_toreplaceold$ThirdForestChangeEventd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ThirdForestChangeEvent, SMEreviewdData_toreplaceold$ThirdForestChangeEventc)
SMEreviewdData_toreplaceold$ChangeType3d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ChangeType3, SMEreviewdData_toreplaceold$ChangeType3c)
SMEreviewdData_toreplaceold$LossDriver3d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$LossDriver3, SMEreviewdData_toreplaceold$LossDriver3c)
SMEreviewdData_toreplaceold$DegradationDriver3d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$DegradationDriver3, SMEreviewdData_toreplaceold$DegradationDriver3c)
SMEreviewdData_toreplaceold$morethan3forestchangesd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$morethan3forestchanges, SMEreviewdData_toreplaceold$morethan3forestchangesc)
SMEreviewdData_toreplaceold$DescribeExtraChangesd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$DescribeExtraChanges, SMEreviewdData_toreplaceold$DescribeExtraChangesc)
SMEreviewdData_toreplaceold$Change3yeard <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$Change3year, SMEreviewdData_toreplaceold$Change3yearc)
SMEreviewdData_toreplaceold$ChangeType1d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ChangeType1, SMEreviewdData_toreplaceold$ChangeType1c)
SMEreviewdData_toreplaceold$LossDriver1d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ChangeType1, SMEreviewdData_toreplaceold$LossDriver1c)
SMEreviewdData_toreplaceold$DegradationDriver1d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$DegradationDriver1, SMEreviewdData_toreplaceold$DegradationDriver1c)
SMEreviewdData_toreplaceold$LC2018endd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$LC2018end, SMEreviewdData_toreplaceold$LC2018endc)
SMEreviewdData_toreplaceold$ForestType2018d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ForestType2018, SMEreviewdData_toreplaceold$ForestType2018c)
SMEreviewdData_toreplaceold$NonForestType2018d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$NonForestType2018, SMEreviewdData_toreplaceold$NonForestType2018c)
SMEreviewdData_toreplaceold$CropType2018d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$CropType2018, SMEreviewdData_toreplaceold$CropType2018c)
SMEreviewdData_toreplaceold$mixedLCpixeld <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$mixedLCpixel, SMEreviewdData_toreplaceold$mixedLCpixelc)
SMEreviewdData_toreplaceold$Confidenced <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$Confidence, SMEreviewdData_toreplaceold$Confidencec)
SMEreviewdData_toreplaceold$ConfidenceReasoningd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ConfidenceReasoning, SMEreviewdData_toreplaceold$ConfidenceReasoningc)
write.csv(SMEreviewdData_toreplaceold, file = 'Results\\AllDataMerged.csv', row.names = F)
dim(SMEreviewdData_toreplaceold)
table(SMEreviewdData_toreplaceold$LC2018endd)
FINALDATASET <- SMEreviewdData_toreplaceold
colnames(FINALDATASET)
FINALDATASET <- FINALDATASET[-c(4:32,34:94)]
colnames(FINALDATASET)
dim(FINALDATASET)
#merge the sample pixel counts with the mapped strata of each point
FINALDATASET <- merge(FINALDATASET, strataAreas, by.x = 'pl_change_strata', by.y = 'MapValue', all.x = F)
dim(FINALDATASET)
############Set up clean CEO labels - Version 4 NEW
#In version 4: Pixels with multiple events are combined, agroforestry pulled out
FINALDATASET$CEOreadable_v4_NEWd <- ifelse(FINALDATASET$ChangeType1d == "Degradation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(FINALDATASET$ChangeType1d == "Deforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration"), 'Deforestation',
ifelse(FINALDATASET$ChangeType1d == "Reforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration"), 'Reforestation',
ifelse(FINALDATASET$morethan3forestchangesd == "no", 'multiple events',
ifelse(FINALDATASET$morethan3forestchangesd == "yes", 'multiple events',
ifelse(FINALDATASET$ChangeType2d %in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$ThirdForestChangeEventd == "no", 'multiple events',
ifelse(FINALDATASET$forestChangeEventd == "N/A non-forest entire time" & FINALDATASET$CropType2000d %in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest Agroforestry",
ifelse(FINALDATASET$forestChangeEventd == "N/A non-forest entire time" & FINALDATASET$CropType2000d %!in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest",
ifelse(FINALDATASET$forestChangeEventd == "no", "stable forest", 'NotReviewed')))))))))
table(FINALDATASET$CEOreadable_v4_NEWb)
#write.csv(SMEreviewdData_toreplaceold, file = 'Results\\TEST_CEOreadable_v4output.csv', row.names = F)
#In version 5: Pixels with multiple events are seperated, agroforestry pulled out, separated by epoch
#getting close to sampling strata, but degradation still present in CEO labels
FINALDATASET$CEOreadable_v5_NEWd_perennialasnonforest <- ifelse(FINALDATASET$ChangeType1d == "Degradation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(FINALDATASET$ChangeType1d == "Deforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2000:2005), 'Deforestation Epoch1',
ifelse(FINALDATASET$ChangeType1d == "Deforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2006:2018), 'Deforestation Epoch23',
ifelse(FINALDATASET$ChangeType1d == "Reforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2000:2005), 'Reforestation Epoch1',
ifelse(FINALDATASET$ChangeType1d == "Reforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2006:2018), 'Reforestation Epoch23',
ifelse(FINALDATASET$morethan3forestchangesd == "no", 'multiple events eco possible',
ifelse(FINALDATASET$morethan3forestchangesd == "yes", 'multiple events noise',
ifelse(FINALDATASET$ChangeType2d %in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$ThirdForestChangeEventd == "no", 'multiple events eco possible',
ifelse(FINALDATASET$forestChangeEventd == "N/A non-forest entire time" & FINALDATASET$CropType2000d %in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest", #not labeled agro
ifelse(FINALDATASET$forestChangeEventd == "N/A non-forest entire time" & FINALDATASET$CropType2000d %!in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest",
ifelse(FINALDATASET$forestChangeEventd == "no", "stable forest", 'NotReviewed')))))))))))
table(FINALDATASET$CEOreadable_v5_NEWd_perennialasnonforest)
FINALDATASET$CEOreadable_v6_NEWd_perennialasforest <- ifelse(FINALDATASET$ChangeType1d == "Degradation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(FINALDATASET$ChangeType1d == "Deforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2000:2005), 'Deforestation Epoch1',
ifelse(FINALDATASET$ChangeType1d == "Deforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2006:2018), 'Deforestation Epoch23',
ifelse(FINALDATASET$ChangeType1d == "Reforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2000:2005), 'Reforestation Epoch1',
ifelse(FINALDATASET$ChangeType1d == "Reforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2006:2018), 'Reforestation Epoch23',
ifelse(FINALDATASET$morethan3forestchangesd == "no", 'multiple events eco possible',
ifelse(FINALDATASET$morethan3forestchangesd == "yes", 'multiple events noise',
ifelse(FINALDATASET$ChangeType2d %in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$ThirdForestChangeEventd == "no", 'multiple events eco possible',
ifelse(FINALDATASET$forestChangeEventd == "N/A non-forest entire time" & FINALDATASET$CropType2000d %in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable forest", #not labeled agro
ifelse(FINALDATASET$forestChangeEventd == "N/A non-forest entire time" & FINALDATASET$CropType2000d %!in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest",
ifelse(FINALDATASET$forestChangeEventd == "no", "stable forest", 'NotReviewed')))))))))))
table(FINALDATASET$CEOreadable_v6_NEWd_perennialasforest)
########Simplified Map data
FINALDATASET$ReadableChangeStrata_Map_v4<-"fixMe"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 31]<-"Deforestation"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 32]<-"Deforestation"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 41]<-"Reforestation"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 42]<-"Reforestation"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 50]<-"stable forest"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 60]<-"stable non forest"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 70]<-"multiple events"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 80]<-"multiple events"
unique(FINALDATASET$ReadableChangeStrata_Map_v4)
colnames(FINALDATASET)
#add a human readable column for change strata
##### Epoch 1 = 2000-2005
##### Epoch 2 = 2006-2012
##### Epoch 3 = 2013-2018
datamerged_FIXED$ReadableChangeStrata_Map_v1<-"fixMe"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 31]<-"deforested epoch 1"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 32]<-"deforested epoch 2 & 3"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 41]<-"reforested epoch 1"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 42]<-"reforested epoch 2 & 3"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 50]<-"stable forest"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 60]<-"stable non forest"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 70]<-"multiple events noise"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 80]<-"multiple events ecologically possible"
table(datamerged_FIXED$ReadableChangeStrata_Map_v1)
colnames(datamerged_FIXED)
#add in new degradation labels, for assessing the accuracy, making CEO match map strata
degradation_relabel <- read.csv("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\Degradation_Relabel.csv")
dim(degradation_relabel)
FINALDATASET <- merge(FINALDATASET, degradation_relabel, by.x = c('PLOTID','lon','lat'), by.y = c('PLOTID','lon','lat'), all.x = F)
dim(FINALDATASET)
FINALDATASET$CEOreadable_v6_perennialasnonforest_DEGrelabel<-"fixme"
FINALDATASET$CEOreadable_v6_perennialasnonforest_DEGrelabel <- ifelse(FINALDATASET$CEOreadable_v5_NEWd_perennialasnonforest == "Degradation" & FINALDATASET$FinalLabel != "Deforestation", FINALDATASET$FinalLabel,
ifelse(FINALDATASET$CEOreadable_v5_NEWd_perennialasnonforest == "Degradation" & FINALDATASET$FinalLabel == "Deforestation" & FINALDATASET$Change1yeard %in% c(2000:2005), 'Deforestation Epoch1',
ifelse(FINALDATASET$CEOreadable_v5_NEWd_perennialasnonforest == "Degradation" & FINALDATASET$FinalLabel == "Deforestation" & FINALDATASET$Change1yeard %in% c(2006:2018), 'Deforestation Epoch23',
FINALDATASET$CEOreadable_v5_NEWd_perennialasnonforest)))
table(FINALDATASET$CEOreadable_v6_perennialasnonforest_DEGrelabel)
FINALDATASET$CEOreadable_v6_perennialasFOREST_DEGrelabel <- ifelse(FINALDATASET$CEOreadable_v6_NEWd_perennialasforest == "Degradation" & FINALDATASET$FinalLabel != "Deforestation", FINALDATASET$FinalLabel,
ifelse(FINALDATASET$CEOreadable_v6_NEWd_perennialasforest == "Degradation" & FINALDATASET$FinalLabel == "Deforestation" & FINALDATASET$Change1yeard %in% c(2000:2005), 'Deforestation Epoch1',
ifelse(FINALDATASET$CEOreadable_v6_NEWd_perennialasforest == "Degradation" & FINALDATASET$FinalLabel == "Deforestation" & FINALDATASET$Change1yeard %in% c(2006:2018), 'Deforestation Epoch23',
FINALDATASET$CEOreadable_v6_NEWd_perennialasforest)))
table(FINALDATASET$CEOreadable_v6_perennialasFOREST_DEGrelabel)
table(degradation_relabel$FinalLabel)
table(FINALDATASET$CEOreadable_v4_NEWd)
FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel <- ifelse(FINALDATASET$CEOreadable_v4_NEWd == "Degradation", FINALDATASET$FinalLabel,
FINALDATASET$CEOreadable_v4_NEWd)
table(FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
write.csv(FINALDATASET, file = 'Results\\CHECK_DEGRELABEL_TEMP.csv', row.names = T)
#THIS IS THE ONE WITH DEGRADATION RELABELED BUT PERENNIAL CROPS SEPARATE
table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
table_strataname_RelabelDEG_perennialFORESTseparate <- table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
write.csv(table_RelabelDEG_StrataCEOMatch_perennialFORESTseparate , file = 'Results\\table_RelabelDEG_StrataCEOMatch_perennialFORESTseparate.csv', row.names = T)
write.csv(table_RelabelDEG_perennialFORESTseparate , file = 'Results\\table_RelabelDEG_StrataCEOMatch_perennialFORESTseparate.csv', row.names = T)
write.csv(table_strataname_RelabelDEG_perennialFORESTseparate , file = 'Results\\table_RelabelDEG_StrataCEOMatch_perennialFORESTseparate.csv', row.names = T)
table_strataname_RelabelDEG_perennialFORESTseparate <- table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
#THIS IS THE ONE WITH DEGRADATION RELABELED BUT PERENNIAL CROPS SEPARATE
table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel <- ifelse(FINALDATASET$CEOreadable_v4_NEWd == "Degradation", FINALDATASET$FinalLabel,
ifelse(FINALDATASET$CEOrelable_v4_NEWd == "multiple events", "multiple",
ifelse(FINALDATASET$CEOrelable_v4_NEWd == "multiple events eco possible", "multiple",
FINALDATASET$CEOreadable_v4_NEWd)))
table(FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
table(ifelse(FINALDATASET$CEOrelable_v4_NEWd)
table(FINALDATASET$CEOrelable_v4_NEWd)
FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel <- ifelse(FINALDATASET$CEOreadable_v4_NEWd == "Degradation", FINALDATASET$FinalLabel,
ifelse(FINALDATASET$CEOreadable_v4_NEWd == "multiple events", "multiple",
ifelse(FINALDATASET$CEOreadable_v4_NEWd == "multiple events eco possible", "multiple",
FINALDATASET$CEOreadable_v4_NEWd)))
table(FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
table(FINALDATASET$CEOreadable_v4_NEWd)
FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel <- ifelse(FINALDATASET$CEOreadable_v4_NEWd == "Degradation", FINALDATASET$FinalLabel,
ifelse(FINALDATASET$FinalLabel == "multiple events eco possible", "multiple",
FINALDATASET$CEOreadable_v4_NEWd))
table(FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel <- ifelse(FINALDATASET$CEOreadable_v4_NEWd == "Degradation" & FINALDATASET$FinalLabel != " multiple events eco possible", FINALDATASET$FinalLabel,
ifelse(FINALDATASET$CEOreadable_v4_NEWd == "Degradation" & FINALDATASET$FinalLabel == " multiple events eco possible", "multiple events",
FINALDATASET$CEOreadable_v4_NEWd))
table(FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel <- ifelse(FINALDATASET$CEOreadable_v4_NEWd == "Degradation" & FINALDATASET$FinalLabel != "multiple events eco possible", FINALDATASET$FinalLabel,
ifelse(FINALDATASET$CEOreadable_v4_NEWd == "Degradation" & FINALDATASET$FinalLabel == "multiple events eco possible", "multiple events",
FINALDATASET$CEOreadable_v4_NEWd))
table(FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
write.csv(FINALDATASET, file = 'Results\\CHECK_DEGRELABEL_TEMP.csv', row.names = T)
#THIS IS THE ONE WITH DEGRADATION RELABELED BUT PERENNIAL CROPS SEPARATE
table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
table_strataname_RelabelDEG_perennialFORESTseparate <- table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
write.csv(table_strataname_RelabelDEG_perennialFORESTseparate , file = 'Results\\table_RelabelDEG_StrataCEOMatch_perennialFORESTseparate.csv', row.names = T)
write.csv(FINALDATASET, file = 'Results\\FINALDATASET_ALLREVIEWSCOMPLETED.csv', row.names = T)
write.csv(table_strataname_RelabelDEG_perennialFORESTseparate , file = 'Results\\CORRECT_table_RelabelDEG_StrataCEOMatch_perennialFORESTseparate.csv', row.names = T)
#Unbiased Area Estimation of Philippines Forest Change
#Written by Karis Tenneson and Crystal Wespestad (SIG) Feb, 2022
#####################################################################
#Notes: epochs are 2000-2005, 2006-2012, 2013-2018
#there are 850 points total, 150 have been reviewed in duplicate
library(survey)
library(tidyverse)
library(knitr)
library(rmarkdown)
library(tidyr)
library(networkD3)
library(tidyverse)
library(dplyr)
setwd("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis")
##########Join points with map strata values##################
# #Map strata dictionary -- projects/sig-ee/Philippines/v2/strata/gapFillStrata-2-2-0
# 31: "deforested epoch 1",
# 32: "deforested epoch 2 & 3",
# 41: "reforested epoch 1",
# 42: "reforested epoch 2 & 3",
# 50: "stable forest",
# 60: "stable non forest",
# 70: "multiple events noise",
# 80: "multiple events ecologically possible",
## file created of extracted map strata from exported dataCEO_combo
#probably delete this...
data_mapstrata <- read.csv("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\PhilippinesPointsCombo_Strata.csv")
dim(data_mapstrata)
colnames(data_mapstrata)
############## Strata pixel counts #############
strataAreas <- read.csv("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\philippines_pixelcounts.csv")
head(strataAreas)
colnames(strataAreas)[1]<-"MapValue"
colnames(strataAreas)[2]<-"StrataName"
colnames(strataAreas)[3]<-"PixelCount"
strataAreas <- strataAreas[-c(4:5)]
############needed later
'%!in%' <- Negate('%in%')
datamerged_FIXED <- read.csv("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\Datamerged_v2_fixcompleted.csv")
dim(datamerged_FIXED)
colnames(datamerged_FIXED)
###########################################################################
############################################################################
###########################################################################
############################################################################
##After review there were a few points that were double checked because
##there were more off-diagonal points than were expected in the confusion matrix
##Below is the updated analysis with those points altered
#This data file has been cleaned up so column answers are in the right place
datamerged_FIXED_v2 <- read.csv('C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\ceo-Philippines_QAQCReview_MapInterpreterDisagreement-sample-data-2022-05-16_FIXforSMEpart1_DuplicatesRemoved.csv')
colnames(datamerged_FIXED_v2)
datamerged_FIXED_v2 <- datamerged_FIXED_v2[-c(1,6:80)]
colnames(datamerged_FIXED_v2)
dim(datamerged_FIXED_v2)
colnames(datamerged_FIXED)
#write.csv(datamerged_FIXED_v2, file = 'Results\\CHECK850.csv', row.names = F)
colnames(datamerged_FIXED_v2)[1]<-"PLOTIDb"
colnames(datamerged_FIXED_v2)[2]<-"lonb"
colnames(datamerged_FIXED_v2)[3]<-"latb"
colnames(datamerged_FIXED_v2)[4]<-"emailb"
colnames(datamerged_FIXED_v2)[10]<-"Change1yearb"
colnames(datamerged_FIXED_v2)[15]<-"Change2yearb"
colnames(datamerged_FIXED_v2)[22]<-"Change3yearb"
colnames(datamerged_FIXED_v2)[31]<-"Confidenceb"
colnames(datamerged_FIXED_v2)[32]<-"ConfidenceReasoningb"
colnames(datamerged_FIXED_v2)[5]<-"LC2000b"
colnames(datamerged_FIXED_v2)[6]<-"ForestType2000b"
colnames(datamerged_FIXED_v2)[7]<-"NonForestType2000b"
colnames(datamerged_FIXED_v2)[8]<-"CropType2000b"
colnames(datamerged_FIXED_v2)[26]<-"LC2018endb"
colnames(datamerged_FIXED_v2)[9]<-"forestChangeEventb"
colnames(datamerged_FIXED_v2)[23]<-"ChangeType1b"
colnames(datamerged_FIXED_v2)[25]<-"DegradationDriver1b"
colnames(datamerged_FIXED_v2)[24]<-"LossDriver1b"
colnames(datamerged_FIXED_v2)[11]<-"SecondForestChangeEventb"
colnames(datamerged_FIXED_v2)[12]<-"ChangeType2b"
colnames(datamerged_FIXED_v2)[13]<-"DegradationDriver2b"
colnames(datamerged_FIXED_v2)[14]<-"LossDriver2b"
colnames(datamerged_FIXED_v2)[16]<-"ThirdForestChangeEventb"
colnames(datamerged_FIXED_v2)[17]<-"ChangeType3b"
colnames(datamerged_FIXED_v2)[19]<-"DegradationDriver3b"
colnames(datamerged_FIXED_v2)[18]<-"LossDriver3b"
colnames(datamerged_FIXED_v2)[20]<-"morethan3forestchangesb"
colnames(datamerged_FIXED_v2)[21]<-"DescribeExtraChangesb"
colnames(datamerged_FIXED_v2)[27]<-"ForestType2018b"
colnames(datamerged_FIXED_v2)[28]<-"NonForestType2018b"
colnames(datamerged_FIXED_v2)[29]<-"CropType2018b"
colnames(datamerged_FIXED_v2)[30]<-"mixedLCpixelb"
colnames(datamerged_FIXED_v2)
#########More points were reviewed by SMEs, 41 points
SMEreviewdData_toreplaceold <- read.csv('C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\reviewed41_bestlabel.csv')
dim(SMEreviewdData_toreplaceold)
colnames(SMEreviewdData_toreplaceold)
#write.csv(SMEreviewdData_toreplaceold, file = 'Results\\CHECK41.csv', row.names = F)
datamerged_combo12 <- merge(datamerged_FIXED, datamerged_FIXED_v2, by.x = c('lon','lat'), by.y = c('lonb','latb'), all.x = T)
#find duplicates in PLOTID: 19  71  82 266 315 372 445 652 669 718 814 863 901 903 924
sort(datamerged_combo12$PLOTIDb[duplicated(datamerged_combo12$PLOTID)])
SMEreviewdData_toreplaceold <- merge(datamerged_combo12, SMEreviewdData_toreplaceold, by.x = c('lon','lat'), by.y = c('lonc','latc'), all.x = T)
dim(SMEreviewdData_toreplaceold)
#write.csv(SMEreviewdData_toreplaceold, file = 'Results\\ARELATLONGSWRONG.csv', row.names = F)
####Fill in all the values for the rows that were not reviewed with the original answers
SMEreviewdData_toreplaceold$EMAILc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$EMAILc, SMEreviewdData_toreplaceold$emailb)
SMEreviewdData_toreplaceold$LC2000c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$LC2000c, SMEreviewdData_toreplaceold$LC2000b)
SMEreviewdData_toreplaceold$ForestType2000c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ForestType2000c, SMEreviewdData_toreplaceold$ForestType2000b)
SMEreviewdData_toreplaceold$NonForestType2000c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$NonForestType2000c, SMEreviewdData_toreplaceold$NonForestType2000b)
SMEreviewdData_toreplaceold$CropType2000c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$CropType2000c, SMEreviewdData_toreplaceold$CropType2000b)
SMEreviewdData_toreplaceold$forestChangeEventc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$forestChangeEventc, SMEreviewdData_toreplaceold$forestChangeEventb)
SMEreviewdData_toreplaceold$Change1yearc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$Change1yearc, SMEreviewdData_toreplaceold$Change1yearb)
SMEreviewdData_toreplaceold$SecondForestChangeEventc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$SecondForestChangeEventc, SMEreviewdData_toreplaceold$SecondForestChangeEventb)
SMEreviewdData_toreplaceold$ChangeType2c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ChangeType2c, SMEreviewdData_toreplaceold$ChangeType2b)
SMEreviewdData_toreplaceold$DegradationDriver2c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$DegradationDriver2c, SMEreviewdData_toreplaceold$DegradationDriver2b)
SMEreviewdData_toreplaceold$LossDriver2c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$LossDriver2c, SMEreviewdData_toreplaceold$LossDriver2b)
SMEreviewdData_toreplaceold$Change2yearc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$Change2yearc, SMEreviewdData_toreplaceold$Change2yearb)
SMEreviewdData_toreplaceold$ThirdForestChangeEventc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ThirdForestChangeEventc, SMEreviewdData_toreplaceold$ThirdForestChangeEventb)
SMEreviewdData_toreplaceold$ChangeType3c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ChangeType3c, SMEreviewdData_toreplaceold$ChangeType3b)
SMEreviewdData_toreplaceold$LossDriver3c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$LossDriver3c, SMEreviewdData_toreplaceold$LossDriver3b)
SMEreviewdData_toreplaceold$DegradationDriver3c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$DegradationDriver3c, SMEreviewdData_toreplaceold$DegradationDriver3b)
SMEreviewdData_toreplaceold$morethan3forestchangesc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$morethan3forestchangesc, SMEreviewdData_toreplaceold$morethan3forestchangesb)
SMEreviewdData_toreplaceold$DescribeExtraChangesc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$DescribeExtraChangesc, SMEreviewdData_toreplaceold$DescribeExtraChangesb)
SMEreviewdData_toreplaceold$Change3yearc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$Change3yearc, SMEreviewdData_toreplaceold$Change3yearb)
SMEreviewdData_toreplaceold$ChangeType1c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ChangeType1c, SMEreviewdData_toreplaceold$ChangeType1b)
SMEreviewdData_toreplaceold$LossDriver1c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$LossDriver1c, SMEreviewdData_toreplaceold$LossDriver1b)
SMEreviewdData_toreplaceold$DegradationDriver1c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$DegradationDriver1c, SMEreviewdData_toreplaceold$DegradationDriver1b)
SMEreviewdData_toreplaceold$LC2018endc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$LC2018endc, SMEreviewdData_toreplaceold$LC2018endb)
SMEreviewdData_toreplaceold$ForestType2018c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ForestType2018c, SMEreviewdData_toreplaceold$ForestType2018b)
SMEreviewdData_toreplaceold$NonForestType2018c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$NonForestType2018c, SMEreviewdData_toreplaceold$NonForestType2018b)
SMEreviewdData_toreplaceold$CropType2018c <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$CropType2018c, SMEreviewdData_toreplaceold$CropType2018b)
SMEreviewdData_toreplaceold$mixedLCpixelc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$mixedLCpixelc, SMEreviewdData_toreplaceold$mixedLCpixelb)
SMEreviewdData_toreplaceold$Confidencec <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$Confidencec, SMEreviewdData_toreplaceold$Confidenceb)
SMEreviewdData_toreplaceold$ConfidenceReasoningc <- ifelse(SMEreviewdData_toreplaceold$emailb %!in% c('tgisorena@yahoo.com','leizeldelacruz@gmail.com'), SMEreviewdData_toreplaceold$ConfidenceReasoningc, SMEreviewdData_toreplaceold$ConfidenceReasoningb)
####Fill in all the values for the rows that were not reviewed with the original answers
SMEreviewdData_toreplaceold$EMAILd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$EMAIL, SMEreviewdData_toreplaceold$EMAILc)
SMEreviewdData_toreplaceold$LC2000d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$LC2000a, SMEreviewdData_toreplaceold$LC2000c)
SMEreviewdData_toreplaceold$ForestType2000d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ForestType2000, SMEreviewdData_toreplaceold$ForestType2000c)
SMEreviewdData_toreplaceold$NonForestType2000d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$NonForestType2000, SMEreviewdData_toreplaceold$NonForestType2000c)
SMEreviewdData_toreplaceold$CropType2000d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$CropType2000, SMEreviewdData_toreplaceold$CropType2000c)
SMEreviewdData_toreplaceold$forestChangeEventd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$forestChangeEvent, SMEreviewdData_toreplaceold$forestChangeEventc)
SMEreviewdData_toreplaceold$Change1yeard <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$Change1year, SMEreviewdData_toreplaceold$Change1yearc)
SMEreviewdData_toreplaceold$SecondForestChangeEventd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$SecondForestChangeEvent, SMEreviewdData_toreplaceold$SecondForestChangeEventc)
SMEreviewdData_toreplaceold$ChangeType2d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ChangeType2, SMEreviewdData_toreplaceold$ChangeType2c)
SMEreviewdData_toreplaceold$DegradationDriver2d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$DegradationDriver2c, SMEreviewdData_toreplaceold$DegradationDriver2c)
SMEreviewdData_toreplaceold$LossDriver2d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$LossDriver2, SMEreviewdData_toreplaceold$LossDriver2c)
SMEreviewdData_toreplaceold$Change2yeard <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$Change2year, SMEreviewdData_toreplaceold$Change2yearc)
SMEreviewdData_toreplaceold$ThirdForestChangeEventd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ThirdForestChangeEvent, SMEreviewdData_toreplaceold$ThirdForestChangeEventc)
SMEreviewdData_toreplaceold$ChangeType3d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ChangeType3, SMEreviewdData_toreplaceold$ChangeType3c)
SMEreviewdData_toreplaceold$LossDriver3d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$LossDriver3, SMEreviewdData_toreplaceold$LossDriver3c)
SMEreviewdData_toreplaceold$DegradationDriver3d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$DegradationDriver3, SMEreviewdData_toreplaceold$DegradationDriver3c)
SMEreviewdData_toreplaceold$morethan3forestchangesd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$morethan3forestchanges, SMEreviewdData_toreplaceold$morethan3forestchangesc)
SMEreviewdData_toreplaceold$DescribeExtraChangesd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$DescribeExtraChanges, SMEreviewdData_toreplaceold$DescribeExtraChangesc)
SMEreviewdData_toreplaceold$Change3yeard <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$Change3year, SMEreviewdData_toreplaceold$Change3yearc)
SMEreviewdData_toreplaceold$ChangeType1d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ChangeType1, SMEreviewdData_toreplaceold$ChangeType1c)
SMEreviewdData_toreplaceold$LossDriver1d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ChangeType1, SMEreviewdData_toreplaceold$LossDriver1c)
SMEreviewdData_toreplaceold$DegradationDriver1d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$DegradationDriver1, SMEreviewdData_toreplaceold$DegradationDriver1c)
SMEreviewdData_toreplaceold$LC2018endd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$LC2018end, SMEreviewdData_toreplaceold$LC2018endc)
SMEreviewdData_toreplaceold$ForestType2018d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ForestType2018, SMEreviewdData_toreplaceold$ForestType2018c)
SMEreviewdData_toreplaceold$NonForestType2018d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$NonForestType2018, SMEreviewdData_toreplaceold$NonForestType2018c)
SMEreviewdData_toreplaceold$CropType2018d <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$CropType2018, SMEreviewdData_toreplaceold$CropType2018c)
SMEreviewdData_toreplaceold$mixedLCpixeld <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$mixedLCpixel, SMEreviewdData_toreplaceold$mixedLCpixelc)
SMEreviewdData_toreplaceold$Confidenced <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$Confidence, SMEreviewdData_toreplaceold$Confidencec)
SMEreviewdData_toreplaceold$ConfidenceReasoningd <- ifelse(SMEreviewdData_toreplaceold$LC2000c %!in% c('forest','non-forest'), SMEreviewdData_toreplaceold$ConfidenceReasoning, SMEreviewdData_toreplaceold$ConfidenceReasoningc)
write.csv(SMEreviewdData_toreplaceold, file = 'Results\\AllDataMerged.csv', row.names = F)
dim(SMEreviewdData_toreplaceold)
table(SMEreviewdData_toreplaceold$LC2018endd)
FINALDATASET <- SMEreviewdData_toreplaceold
colnames(FINALDATASET)
FINALDATASET <- FINALDATASET[-c(4:32,34:94)]
colnames(FINALDATASET)
dim(FINALDATASET)
#merge the sample pixel counts with the mapped strata of each point
FINALDATASET <- merge(FINALDATASET, strataAreas, by.x = 'pl_change_strata', by.y = 'MapValue', all.x = F)
dim(FINALDATASET)
############Set up clean CEO labels - Version 4 NEW
#In version 4: Pixels with multiple events are combined, agroforestry pulled out
FINALDATASET$CEOreadable_v4_NEWd <- ifelse(FINALDATASET$ChangeType1d == "Degradation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(FINALDATASET$ChangeType1d == "Deforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration"), 'Deforestation',
ifelse(FINALDATASET$ChangeType1d == "Reforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration"), 'Reforestation',
ifelse(FINALDATASET$morethan3forestchangesd == "no", 'multiple events',
ifelse(FINALDATASET$morethan3forestchangesd == "yes", 'multiple events',
ifelse(FINALDATASET$ChangeType2d %in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$ThirdForestChangeEventd == "no", 'multiple events',
ifelse(FINALDATASET$forestChangeEventd == "N/A non-forest entire time" & FINALDATASET$CropType2000d %in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest Agroforestry",
ifelse(FINALDATASET$forestChangeEventd == "N/A non-forest entire time" & FINALDATASET$CropType2000d %!in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest",
ifelse(FINALDATASET$forestChangeEventd == "no", "stable forest", 'NotReviewed')))))))))
table(FINALDATASET$CEOreadable_v4_NEWb)
#write.csv(SMEreviewdData_toreplaceold, file = 'Results\\TEST_CEOreadable_v4output.csv', row.names = F)
#In version 5: Pixels with multiple events are seperated, agroforestry pulled out, separated by epoch
#getting close to sampling strata, but degradation still present in CEO labels
FINALDATASET$CEOreadable_v5_NEWd_perennialasnonforest <- ifelse(FINALDATASET$ChangeType1d == "Degradation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(FINALDATASET$ChangeType1d == "Deforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2000:2005), 'Deforestation Epoch1',
ifelse(FINALDATASET$ChangeType1d == "Deforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2006:2018), 'Deforestation Epoch23',
ifelse(FINALDATASET$ChangeType1d == "Reforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2000:2005), 'Reforestation Epoch1',
ifelse(FINALDATASET$ChangeType1d == "Reforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2006:2018), 'Reforestation Epoch23',
ifelse(FINALDATASET$morethan3forestchangesd == "no", 'multiple events eco possible',
ifelse(FINALDATASET$morethan3forestchangesd == "yes", 'multiple events noise',
ifelse(FINALDATASET$ChangeType2d %in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$ThirdForestChangeEventd == "no", 'multiple events eco possible',
ifelse(FINALDATASET$forestChangeEventd == "N/A non-forest entire time" & FINALDATASET$CropType2000d %in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest", #not labeled agro
ifelse(FINALDATASET$forestChangeEventd == "N/A non-forest entire time" & FINALDATASET$CropType2000d %!in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest",
ifelse(FINALDATASET$forestChangeEventd == "no", "stable forest", 'NotReviewed')))))))))))
table(FINALDATASET$CEOreadable_v5_NEWd_perennialasnonforest)
FINALDATASET$CEOreadable_v6_NEWd_perennialasforest <- ifelse(FINALDATASET$ChangeType1d == "Degradation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration"), 'Degradation',
ifelse(FINALDATASET$ChangeType1d == "Deforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2000:2005), 'Deforestation Epoch1',
ifelse(FINALDATASET$ChangeType1d == "Deforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2006:2018), 'Deforestation Epoch23',
ifelse(FINALDATASET$ChangeType1d == "Reforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2000:2005), 'Reforestation Epoch1',
ifelse(FINALDATASET$ChangeType1d == "Reforestation" & FINALDATASET$ChangeType2d %!in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$Change1yeard %in% c(2006:2018), 'Reforestation Epoch23',
ifelse(FINALDATASET$morethan3forestchangesd == "no", 'multiple events eco possible',
ifelse(FINALDATASET$morethan3forestchangesd == "yes", 'multiple events noise',
ifelse(FINALDATASET$ChangeType2d %in% c("Degradation","Deforestation","Regeneration") & FINALDATASET$ThirdForestChangeEventd == "no", 'multiple events eco possible',
ifelse(FINALDATASET$forestChangeEventd == "N/A non-forest entire time" & FINALDATASET$CropType2000d %in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable forest", #not labeled agro
ifelse(FINALDATASET$forestChangeEventd == "N/A non-forest entire time" & FINALDATASET$CropType2000d %!in% c("coconut / other palm","unsure","fruit trees (mango, cashew, avocado, rambutan durian)","banana"), "stable nonforest",
ifelse(FINALDATASET$forestChangeEventd == "no", "stable forest", 'NotReviewed')))))))))))
table(FINALDATASET$CEOreadable_v6_NEWd_perennialasforest)
########Simplified Map data
FINALDATASET$ReadableChangeStrata_Map_v4<-"fixMe"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 31]<-"Deforestation"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 32]<-"Deforestation"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 41]<-"Reforestation"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 42]<-"Reforestation"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 50]<-"stable forest"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 60]<-"stable non forest"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 70]<-"multiple events"
FINALDATASET$ReadableChangeStrata_Map_v4[FINALDATASET$pl_change_strata == 80]<-"multiple events"
unique(FINALDATASET$ReadableChangeStrata_Map_v4)
colnames(FINALDATASET)
#add a human readable column for change strata
##### Epoch 1 = 2000-2005
##### Epoch 2 = 2006-2012
##### Epoch 3 = 2013-2018
datamerged_FIXED$ReadableChangeStrata_Map_v1<-"fixMe"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 31]<-"deforested epoch 1"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 32]<-"deforested epoch 2 & 3"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 41]<-"reforested epoch 1"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 42]<-"reforested epoch 2 & 3"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 50]<-"stable forest"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 60]<-"stable non forest"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 70]<-"multiple events noise"
datamerged_FIXED$ReadableChangeStrata_Map_v1[datamerged_FIXED$pl_change_strata == 80]<-"multiple events ecologically possible"
table(datamerged_FIXED$ReadableChangeStrata_Map_v1)
colnames(datamerged_FIXED)
#add in new degradation labels, for assessing the accuracy, making CEO match map strata
degradation_relabel <- read.csv("C:\\Users\\cryst\\OneDrive\\Documents\\Philippines\\PhilippinesQAQCanalysis\\data\\Degradation_Relabel.csv")
dim(degradation_relabel)
FINALDATASET <- merge(FINALDATASET, degradation_relabel, by.x = c('PLOTID','lon','lat'), by.y = c('PLOTID','lon','lat'), all.x = F)
dim(FINALDATASET)
FINALDATASET$CEOreadable_v6_perennialasnonforest_DEGrelabel<-"fixme"
FINALDATASET$CEOreadable_v6_perennialasnonforest_DEGrelabel <- ifelse(FINALDATASET$CEOreadable_v5_NEWd_perennialasnonforest == "Degradation" & FINALDATASET$FinalLabel != "Deforestation", FINALDATASET$FinalLabel,
ifelse(FINALDATASET$CEOreadable_v5_NEWd_perennialasnonforest == "Degradation" & FINALDATASET$FinalLabel == "Deforestation" & FINALDATASET$Change1yeard %in% c(2000:2005), 'Deforestation Epoch1',
ifelse(FINALDATASET$CEOreadable_v5_NEWd_perennialasnonforest == "Degradation" & FINALDATASET$FinalLabel == "Deforestation" & FINALDATASET$Change1yeard %in% c(2006:2018), 'Deforestation Epoch23',
FINALDATASET$CEOreadable_v5_NEWd_perennialasnonforest)))
table(FINALDATASET$CEOreadable_v6_perennialasnonforest_DEGrelabel)
FINALDATASET$CEOreadable_v6_perennialasFOREST_DEGrelabel <- ifelse(FINALDATASET$CEOreadable_v6_NEWd_perennialasforest == "Degradation" & FINALDATASET$FinalLabel != "Deforestation", FINALDATASET$FinalLabel,
ifelse(FINALDATASET$CEOreadable_v6_NEWd_perennialasforest == "Degradation" & FINALDATASET$FinalLabel == "Deforestation" & FINALDATASET$Change1yeard %in% c(2000:2005), 'Deforestation Epoch1',
ifelse(FINALDATASET$CEOreadable_v6_NEWd_perennialasforest == "Degradation" & FINALDATASET$FinalLabel == "Deforestation" & FINALDATASET$Change1yeard %in% c(2006:2018), 'Deforestation Epoch23',
FINALDATASET$CEOreadable_v6_NEWd_perennialasforest)))
table(FINALDATASET$CEOreadable_v6_perennialasFOREST_DEGrelabel)
table(degradation_relabel$FinalLabel)
FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel <- ifelse(FINALDATASET$CEOreadable_v4_NEWd == "Degradation" & FINALDATASET$FinalLabel != "multiple events eco possible", FINALDATASET$FinalLabel,
ifelse(FINALDATASET$CEOreadable_v4_NEWd == "Degradation" & FINALDATASET$FinalLabel == "multiple events eco possible", "multiple events",
FINALDATASET$CEOreadable_v4_NEWd))
table(FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
write.csv(FINALDATASET, file = 'Results\\CHECK_DEGRELABEL_TEMP.csv', row.names = T)
#THIS IS THE EASY TO READ ONE
#cross tab of NEW simplified mapv3 and ceo v4 agroforestry removed strata
table(FINALDATASET$ReadableChangeStrata_Map_v4, FINALDATASET$CEOreadable_v4_NEWd)
table_mapv4_ceov4 <- table(FINALDATASET$ReadableChangeStrata_Map_v4, FINALDATASET$CEOreadable_v4_NEWd)
write.csv(table_mapv4_ceov4, file = 'Results\\CrossTable_mapv4_ceov4_simple_NEW.csv', row.names = T)
#THIS IS THE ORIGINAL STRATA VS SIMPLE CEO ONE
#cross tab of NEW simplified mapv3 and ceo v4 agroforestry removed strata
table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v4_NEWd)
table_strataorig_ceov4 <- table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v4_NEWd)
write.csv(table_strataorig_ceov4, file = 'Results\\CrossTable_STRATAorig_ceov4_simple_NEW.csv', row.names = T)
#THIS IS THE ONE WHERE STRATA AND CEO MATCH, FOR ACCURACCY CHECKS
#cross tab of NEW strataorig and ceov5, agroforestry pulled out, separated by epoch, degradation relabeled, perennial stable nonforest
table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v6_perennialasnonforest_DEGrelabel)
table_strataname_StrataCEOMatch <- table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v6_perennialasnonforest_DEGrelabel)
write.csv(table_strataname_StrataCEOMatch, file = 'Results\\CrossTable_StrataCEOMatch_perennialnonforest.csv', row.names = T)
#THIS IS THE ONE WHERE STRATA AND CEO MATCH, FOR ACCURACCY CHECKS - STABLE PERENNIAL RELABELED FOREST HERE
#cross tab of NEW strataorig and ceov5, agroforestry pulled out, separated by epoch, degradation relabeled, perennial stable nonforest
table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v6_perennialasFOREST_DEGrelabel)
table_strataname_StrataCEOMatch_perennialFOREST <- table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v6_perennialasFOREST_DEGrelabel)
write.csv(table_strataname_StrataCEOMatch_perennialFOREST , file = 'Results\\CrossTable_StrataCEOMatch_perennialFOREST.csv', row.names = T)
#THIS IS THE ONE WITH DEGRADATION RELABELED BUT PERENNIAL CROPS SEPARATE
table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
table_strataname_RelabelDEG_perennialFORESTseparate <- table(FINALDATASET$StrataName, FINALDATASET$CEOreadable_v7_perennialseparate_DEGrelabel)
write.csv(table_strataname_RelabelDEG_perennialFORESTseparate , file = 'Results\\CORRECT_table_RelabelDEG_StrataCEOMatch_perennialFORESTseparate.csv', row.names = T)
write.csv(FINALDATASET, file = 'Results\\FINALDATASET_ALLREVIEWSCOMPLETED.csv', row.names = T)
